# Лабораторная работа №5

## Задание

 + На серверах web1, web2 установить Nginx.
 + На серверах haproxy1, haproxy2 установить и настроить отказоустойчивую связку HAProxy+Keepalived. Настроить VIP с помощью Keepalived в соответствии со схемой
 + На серверах web1, web2 Nginx должен работать по порту 8080 и отдавать кастомную страницу, зайдя на которую можно понять на каком сервере вы находитесь.
 + На серверах с HAProxy ПО должно обеспечить балансировку нагрузки серверов web1 и web2 в режиме round-robin. Сделать таймауты ожидания ответа web1 и web2 как можно меньше. Скажем, 1-2 секунды
 + Установка и настройка всего ПО должна быть обеспечена Ansible-сценарием.
 + Все файлы по этому заданию выложить в Github и написать ReadMe со скринами работоспособности и инструкцию по запуску вашего Ansible-сценария.

## Как запустить playbook

Сначала уничтожить все то, что было сделано:

````
vagrant destroy --force
````

Далее поднять vagrant:
````
vagrant up
````

Запустить playbook:

````
ansible-playbook nginx.yml 
````

## Проверка балансировщика
### Всё работает и достойно зачета
![Снимок экрана от 2022-04-06 21-30-58](https://user-images.githubusercontent.com/89969340/162179915-a8d654a1-883c-45f1-9b5d-1aa2c02be7fc.png)



## Проверка отказоустойчивости(дадада)
### Отключен haproxy1
![Снимок экрана от 2022-04-06 21-23-24](https://user-images.githubusercontent.com/89969340/162179964-6d705abe-25e8-41c1-8e29-d4d5ca38dd12.png)


### Отключен haproxy2
![Снимок экрана от 2022-04-06 21-24-32](https://user-images.githubusercontent.com/89969340/162180011-1428f961-0385-4426-8980-84bdb8cf6a8f.png)
![Снимок экрана от 2022-04-06 21-26-08](https://user-images.githubusercontent.com/89969340/162180051-e4b4fc59-a656-46b3-a3c4-78446ca8483e.png)
